# Appディレクトリ - GitSearchAI Chrome拡張機能ソースコード

## 概要
このディレクトリには、マニフェスト設定、ローカライゼーションファイル、UIページ、スクリプト、スタイル、テストを含む、GitSearchAI Chrome拡張機能の全ソースコードが含まれています。

## 主要ファイル
- `manifest.json`: 拡張機能マニフェスト設定
- `_locales/`: 英語と日本語の国際化ファイル
- `images/`: 拡張機能アイコンと画像アセット
- `pages/`: ポップアップとオプション用のHTMLページ
- `scripts/`: 全拡張機能のTypeScriptソースコード
- `styles/`: UIコンポーネント用CSSスタイルシート
- `tests/`: 品質保証用テストファイル

## ディレクトリ構造

```
app/
├── manifest.json           # 拡張機能マニフェスト（Manifest V3）
├── _locales/              # 国際化
│   ├── en/messages.json   # 英語翻訳
│   └── ja/messages.json   # 日本語翻訳
├── images/                # アイコンと画像リソース
├── pages/                 # HTMLページ
│   ├── popup.html         # メインポップアップインターフェース
│   └── options.html       # 設定ページ
├── scripts/               # TypeScript/JavaScriptソース
│   ├── background.ts      # サービスワーカー
│   ├── contentscript.ts   # コンテンツスクリプト
│   ├── popup.ts           # ポップアップコントローラー
│   ├── options.ts         # オプションページコントローラー
│   ├── lib/               # 共通ライブラリ
│   ├── modules/           # 機能モジュール
│   └── vendor/            # 外部ライブラリ
├── styles/                # CSSスタイルシート
│   ├── popup.css          # ポップアップスタイル
│   ├── options.css        # オプションページスタイル
│   ├── content.css        # コンテンツスクリプトスタイル
│   └── common.css         # 共有スタイル
└── tests/                 # テストファイル
    ├── unit/              # ユニットテスト
    ├── integration/       # 統合テスト
    └── e2e/               # エンドツーエンドテスト
```

## ビルドプロセス

このディレクトリのソースファイルはwebextension-toolboxによって処理されます：

1. **TypeScriptコンパイル**: `.ts`ファイルがJavaScriptにコンパイルされます
2. **アセット処理**: 画像とその他のアセットが最適化されます
3. **マニフェスト生成**: ブラウザ固有のマニフェストが作成されます
4. **バンドル最適化**: コードが最小化され、本番用に最適化されます

## 開発ワークフロー

### ローカル開発
```bash
# ホットリロード付き開発サーバーを開始
npm run dev:chrome

# ビルドされた拡張機能はdist/chrome/にあります
# Chrome開発者モードでこのディレクトリを読み込みます
```

### ファイル監視
webextension-toolboxは自動的にこのディレクトリの変更を監視し、ファイルが変更されると拡張機能を再ビルドします。

## 設定と権限

### Manifest.json
- **マニフェストバージョン**: 3（最新のChrome拡張機能標準）
- **権限**: 機能に必要な最小限の権限
- **ホスト権限**: GitHubとGitLabドメイン
- **コンテンツセキュリティポリシー**: セキュリティのための厳格なCSP

### 必要な権限
- `storage`: ユーザー設定とキャッシュ管理用
- `activeTab`: 現在のタブとの相互作用用
- `scripting`: コンテンツスクリプト注入用
- `contextMenus`: 右クリック検索機能用

## クロスブラウザ互換性

webextension-toolboxはブラウザ間の互換性を保証します：
- **Chrome**: 全機能サポート
- **Firefox**: WebExtensions APIと互換
- **Edge**: Chromiumベースの互換性
- **Safari**: 限定サポート（一部機能が動作しない場合があります）

## 国際化

拡張機能は複数言語をサポートします：
- **英語** (`en`): デフォルト言語
- **日本語** (`ja`): 完全翻訳サポート

### 新しい言語の追加
1. `_locales/`に新しいディレクトリを作成（例：`fr/`）
2. 翻訳された文字列で`messages.json`を追加
3. 必要に応じてmanifest.jsonを更新

## セキュリティ考慮事項

### コンテンツセキュリティポリシー
- インラインスクリプトは許可されません
- 外部リソースは信頼できるドメインに制限
- evalとunsafe-inlineは禁止

### データ保護
- ユーザーデータはChromeストレージAPIを使用してローカルに保存
- APIキーはストレージで暗号化
- 未承認サーバーへのデータ送信なし

## テスト

### ユニットテスト
`tests/unit/`に配置 - 個別の関数とコンポーネントをテスト

### 統合テスト
`tests/integration/`に配置 - コンポーネント間の相互作用をテスト

### E2Eテスト
`tests/e2e/`に配置 - 完全なユーザーワークフローをテスト

## パフォーマンス最適化

### バンドルサイズ
- ツリーシェイキングが未使用コードを削除
- 最小化がファイルサイズを削減
- より高速な読み込みのためのアセット最適化

### ランタイムパフォーマンス
- 効率的なキャッシュ戦略
- デバウンスされたユーザーインタラクション
- 非重要コンポーネントの遅延読み込み

## 拡張とカスタマイズ

### 新機能の追加
1. `scripts/modules/`に新しいモジュールを作成
2. 対応するテストを追加
3. 必要に応じてマニフェスト権限を更新
4. 機能を文書化

### スタイリングガイドライン
- テーマ用にCSSカスタムプロパティを使用
- BEM命名規則に従う
- レスポンシブデザインを確保
- ダークモードをサポート

## 注意事項

### 制限事項
- APIレート制限が検索頻度に影響する可能性があります
- 一部機能にはアクティブなインターネット接続が必要
- ブラウザ固有の制限が適用される場合があります

### ベストプラクティス
- Chrome拡張機能開発ガイドラインに従う
- 可能な限り後方互換性を維持
- 定期的なセキュリティ監査と更新
- 包括的なエラーハンドリング

### 将来の機能強化
- 追加のGitプラットフォームサポート
- 高度な検索フィルター
- オフライン機能
- 強化されたAI機能
